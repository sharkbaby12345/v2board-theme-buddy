import{r as h,a7 as D,G as Q,b as J,n as z,a8 as U,a9 as X,w as L,aa as V,l as R,s as Y}from"./index-KkQdgUcf.js";function G(e){return U()?(X(e),!0):!1}function C(e){return typeof e=="function"?e():Q(e)}const M=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Z=Object.prototype.toString,k=e=>Z.call(e)==="[object Object]",ee=()=>{};function te(e,t){function n(...r){return new Promise((a,i)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(a).catch(i)})}return n}const q=e=>e();function ne(e=q){const t=h(!0);function n(){t.value=!1}function r(){t.value=!0}const a=(...i)=>{t.value&&e(...i)};return{isActive:D(t),pause:n,resume:r,eventFilter:a}}function re(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const r=t;t=void 0,r&&await r},n}function oe(e){return V()}function ie(e,t,n={}){const{eventFilter:r=q,...a}=n;return L(e,te(r,t),a)}function ae(e,t,n={}){const{eventFilter:r,...a}=n,{eventFilter:i,pause:c,resume:f,isActive:m}=ne(r);return{stop:ie(e,t,{...a,eventFilter:i}),pause:c,resume:f,isActive:m}}function ue(e,t=!0,n){oe()?J(e,n):t?e():z(e)}function se(e,t,n={}){const{immediate:r=!0}=n,a=h(!1);let i=null;function c(){i&&(clearTimeout(i),i=null)}function f(){a.value=!1,c()}function m(...s){c(),a.value=!0,i=setTimeout(()=>{a.value=!1,i=null,e(...s)},C(t))}return r&&(a.value=!0,M&&m()),G(f),{isPending:D(a),start:m,stop:f}}function le(e){var t;const n=C(e);return(t=n==null?void 0:n.$el)!=null?t:n}const N=M?window:void 0,H=M?window.navigator:void 0;function W(...e){let t,n,r,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,a]=e,t=N):[t,n,r,a]=e,!t)return ee;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const i=[],c=()=>{i.forEach(d=>d()),i.length=0},f=(d,l,S,g)=>(d.addEventListener(l,S,g),()=>d.removeEventListener(l,S,g)),m=L(()=>[le(t),C(a)],([d,l])=>{if(c(),!d)return;const S=k(l)?{...l}:l;i.push(...n.flatMap(g=>r.map(A=>f(d,g,A,S))))},{immediate:!0,flush:"post"}),s=()=>{m(),c()};return G(s),s}function ce(){const e=h(!1),t=V();return t&&J(()=>{e.value=!0},t),e}function B(e){const t=ce();return R(()=>(t.value,!!e()))}function x(e,t={}){const{controls:n=!1,navigator:r=H}=t,a=B(()=>r&&"permissions"in r);let i;const c=typeof e=="string"?{name:e}:e,f=h(),m=()=>{i&&(f.value=i.state)},s=re(async()=>{if(a.value){if(!i)try{i=await r.permissions.query(c),W(i,"change",m),m()}catch{f.value="prompt"}return i}});return s(),n?{state:f,isSupported:a,query:s}:f}function we(e={}){const{navigator:t=H,read:n=!1,source:r,copiedDuring:a=1500,legacy:i=!1}=e,c=B(()=>t&&"clipboard"in t),f=x("clipboard-read"),m=x("clipboard-write"),s=R(()=>c.value||i),d=h(""),l=h(!1),S=se(()=>l.value=!1,a);function g(){c.value&&O(f.value)?t.clipboard.readText().then(u=>{d.value=u}):d.value=w()}s.value&&n&&W(["copy","cut"],g);async function A(u=C(r)){s.value&&u!=null&&(c.value&&O(m.value)?await t.clipboard.writeText(u):v(u),d.value=u,l.value=!0,S.start())}function v(u){const y=document.createElement("textarea");y.value=u??"",y.style.position="absolute",y.style.opacity="0",document.body.appendChild(y),y.select(),document.execCommand("copy"),y.remove()}function w(){var u,y,_;return(_=(y=(u=document==null?void 0:document.getSelection)==null?void 0:u.call(document))==null?void 0:y.toString())!=null?_:""}function O(u){return u==="granted"||u==="prompt"}return{isSupported:s,text:d,copied:l,copy:A}}const E=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},F="__vueuse_ssr_handlers__",fe=de();function de(){return F in E||(E[F]=E[F]||{}),E[F]}function pe(e,t){return fe[e]||t}function me(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const ye={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},P="vueuse-storage";function ge(e,t,n,r={}){var a;const{flush:i="pre",deep:c=!0,listenToStorageChanges:f=!0,writeDefaults:m=!0,mergeDefaults:s=!1,shallow:d,window:l=N,eventFilter:S,onError:g=o=>{},initOnMounted:A}=r,v=(d?Y:h)(typeof t=="function"?t():t);if(!n)try{n=pe("getDefaultStorage",()=>{var o;return(o=N)==null?void 0:o.localStorage})()}catch(o){g(o)}if(!n)return v;const w=C(t),O=me(w),u=(a=r.serializer)!=null?a:ye[O],{pause:y,resume:_}=ae(v,()=>I(v.value),{flush:i,deep:c,eventFilter:S});l&&f&&ue(()=>{W(l,"storage",T),W(l,P,$),A&&T()}),A||T();function j(o,p){l&&l.dispatchEvent(new CustomEvent(P,{detail:{key:e,oldValue:o,newValue:p,storageArea:n}}))}function I(o){try{const p=n.getItem(e);if(o==null)j(p,null),n.removeItem(e);else{const b=u.write(o);p!==b&&(n.setItem(e,b),j(p,b))}}catch(p){g(p)}}function K(o){const p=o?o.newValue:n.getItem(e);if(p==null)return m&&w!=null&&n.setItem(e,u.write(w)),w;if(!o&&s){const b=u.read(p);return typeof s=="function"?s(b,w):O==="object"&&!Array.isArray(b)?{...w,...b}:b}else return typeof p!="string"?p:u.read(p)}function T(o){if(!(o&&o.storageArea!==n)){if(o&&o.key==null){v.value=w;return}if(!(o&&o.key!==e)){y();try{(o==null?void 0:o.newValue)!==u.write(v.value)&&(v.value=K(o))}catch(p){g(p)}finally{o?z(_):_()}}}}function $(o){T(o.detail)}return v}function Se(e,t,n={}){const{window:r=N}=n;return ge(e,t,r==null?void 0:r.localStorage,n)}export{we as a,Se as u};
